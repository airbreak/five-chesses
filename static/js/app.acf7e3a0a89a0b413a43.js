webpackJsonp([1],{NHnr:function(t,i,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=r("7+uW"),s={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},staticRenderFns:[]};var h=r("VU/8")({name:"App"},s,!1,function(t){r("s347")},null,null).exports,n=r("/ocq"),a=r("d7EF"),c=r.n(a),d={name:"HelloWorld",data:function(){return{canvas:null,ctx:null,gridNum:20,perGridWidth:50,gridPointsArr:[],attacker:1}},mounted:function(){var t=this;this.$nextTick(function(){t.init()})},methods:{init:function(){var t=document.getElementById("my-canvas");t.width=t.height=this.gridNum*this.perGridWidth,this.canvas=t,this.ctx=t.getContext("2d")},initCanvasGrid:function(){this.drawOuterBorder(),this.drawInserBorder()},drawOuterBorder:function(){this.ctx.lineWidth=6,this.ctx.strokeColor="rgba(0,0,0,.8)",this.ctx.rect(0,0,this.gridNum*this.perGridWidth,this.gridNum*this.perGridWidth),this.ctx.stroke()},drawInserBorder:function(){this.ctx.beginPath(),this.ctx.lineWidth=2,this.ctx.strokeStyle="rgba(0,0,0,.5)";for(var t=1;t<this.gridNum;t++)this.ctx.beginPath(),this.ctx.moveTo(t*this.perGridWidth,0),this.ctx.lineTo(t*this.perGridWidth,this.gridNum*this.perGridWidth),this.ctx.stroke();for(var i=1;i<this.gridNum;i++)this.ctx.beginPath(),this.ctx.moveTo(0,i*this.perGridWidth),this.ctx.lineTo(this.gridNum*this.perGridWidth,i*this.perGridWidth),this.ctx.stroke()},start:function(){this.canvas.addEventListener("click",this.clickGridToAddChess,!1),this.clearCtx(),this.attacker=1,this.initGridPointsArr(),this.initCanvasGrid(),this.initChess()},clearCtx:function(){var t=this.gridNum*this.perGridWidth;this.canvas.width=this.canvas.height=t,this.ctx.clearRect(0,0,t,t)},initChess:function(){var t=Math.round(this.gridNum/2);this.drawChess(t,t),this.swithAttacker(),this.drawChess(t,t+1),this.swithAttacker()},initGridPointsArr:function(){for(var t=[],i=0;i<this.gridNum;i++){t.push([]);for(var r=0;r<this.gridNum;r++)t[i].push({attacker:0,drawed:0})}this.gridPointsArr=t},swithAttacker:function(){this.attacker=this.attacker>1?1:2},drawChess:function(t,i){this.execDrawChess(t,i),this.gridPointsArr[t][i].drawed=1,this.gridPointsArr[t][i].attacker=this.attacker},execDrawChess:function(t,i){this.ctx.strokeStyle=["white","black"][this.attacker-1],this.ctx.fillStyle=this.ctx.strokeStyle,this.ctx.beginPath(),this.ctx.arc(t*this.perGridWidth,i*this.perGridWidth,Math.round(this.perGridWidth/3),0,2*Math.PI),this.ctx.stroke(),this.ctx.fill(),this.ctx.closePath()},clickGridToAddChess:function(t){var i=this,r=this.getMousePos(document.getElementById("my-canvas"),t),e=c()(r,2),s=e[0],h=e[1];if(!(s>this.gridNum*this.perGridWidth||h>this.gridNum*this.perGridWidth)){var n=s/this.perGridWidth,a=h/this.perGridWidth;if(n=Math.round(n),a=Math.round(a),!this.checkIsDrawedChess(n,a))if(this.drawChess(n,a,!0),this.checkIsWin(n,a,4)){var d=["白棋","黑棋"];return void window.setTimeout(function(){i.canvas.removeEventListener("click",i.clickGridToAddChess),window.alert(d[i.attacker-1]+"胜出，请重新开始")},100)}this.swithAttacker()}},getMousePos:function(t,i){var r=t.getBoundingClientRect();return[i.clientX-r.left*(t.width/r.width),i.clientY-r.top*(t.height/r.height)]},checkIsDrawedChess:function(t,i){return 1===this.gridPointsArr[t][i].drawed},checkIsWin:function(t,i,r){var e=this.attacker>1?/22222/:/11111/,s=this.getEastWestLine(t,i).join("");if(e.test(s))return!0;var h=this.getSouthNorthLine(t,i).join("");if(e.test(h))return!0;var n=this.getOtherLine(t,i,1).join("");if(e.test(n))return!0;var a=this.getOtherLine(t,i,-1).join("");return!!e.test(a)},getEastWestLine:function(t,i){for(var r=Math.min(this.gridNum-1,t+4),e=[],s=Math.max(1,t-4);s<=r;s++){var h=this.gridPointsArr[s][i];e.push(h.attacker)}return e},getSouthNorthLine:function(t,i){for(var r=Math.min(this.gridNum-1,i+4),e=[],s=Math.max(1,i-4);s<=r;s++){var h=this.gridPointsArr[t][s];e.push(h.attacker)}return e},getOtherLine:function(t,i){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,e=r>0?t+i:t-i,s=Math.min(this.gridNum-1,t+4),h=[],n=Math.max(1,t-4);n<=s;n++){var a=null;(a=r>0?this.gridPointsArr[n][e-n]:this.gridPointsArr[n][n-e])&&h.push(a.attacker)}return h}}},o={render:function(){var t=this,i=t.$createElement,r=t._self._c||i;return r("div",{staticClass:"canvas-box"},[r("input",{attrs:{type:"button",value:"开始"},on:{click:function(i){t.start()}}}),t._v(" "),r("canvas",{attrs:{id:"my-canvas"}})])},staticRenderFns:[]};var u=r("VU/8")(d,o,!1,function(t){r("t36u")},"data-v-2b42730c",null).exports;e.a.use(n.a);var l=new n.a({routes:[{path:"/",name:"chesses",component:u}]});e.a.config.productionTip=!1,new e.a({el:"#app",router:l,components:{App:h},template:"<App/>"})},s347:function(t,i){},t36u:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.acf7e3a0a89a0b413a43.js.map